import{r as a,n as k,v as E,o as A,p as x,j as e,t as I,I as c,w as L}from"./index-IU7KoCrd.js";import{l as M}from"./index-CGwCSIWv.js";const U=()=>{const[m,p]=a.useState(null),n=k(),N=E(),{orders:f,isLoading:g}=A(t=>t.orders),[s,i]=a.useState(1),[l,b]=a.useState(10),[v,P]=a.useState([]);a.useEffect(()=>{n(x());const t=M("https://parakh-api.onrender.com");return t.on("orderCreated",r=>{console.log("New order created"),n(x()),P(o=>[...o,r.order_created.order_id])}),t.on("orderUpdated",()=>{console.log("Order updated"),n(x())}),()=>{t.disconnect()}},[n]);const _=t=>{p(m===t?null:t)},w=t=>{n(L(t)).then(()=>{N("/order-details")}).catch(r=>{console.log(r)})},y=t=>{b(Number(t.target.value)),i(1)};if(g)return e.jsx("div",{className:"h-full flex flex-col justify-center items-center",children:e.jsx("img",{src:I,alt:"",className:"w-24"})});const h=s*l,S=h-l,O=[...f.slice(S,h)].sort((t,r)=>new Date(r.order_created.created_at)-new Date(t.order_created.created_at)),d=Math.ceil(f.length/l),C=()=>{s<d&&i(s+1)},D=()=>{s>1&&i(s-1)};return e.jsx("div",{className:"h-full p-5",children:e.jsxs("div",{className:"h-full container bg-white p-5 rounded-2xl drop-shadow-xl",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("h1",{className:"text-xl font-Pacifico text-[#f2707f]",children:"All"}),e.jsx("h1",{className:"text-2xl font-Lemon font-bold text-center",children:"Orders"})]}),e.jsxs("nav",{className:"px-10 py-5 flex justify-between border-b-2 border-dashed",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"text",placeholder:"Search",className:"text-sm font-Poppins border-b-2 border-[#767675] outline-none text-center py-1 px-3"}),e.jsx(c,{children:e.jsx("i",{className:"fi fi-br-search text-xl pt-1 px-2 text-black hover:text-[#f2707f]"})})]}),e.jsxs("div",{className:"flex gap-10",children:[e.jsxs("select",{name:"filter",id:"filter",className:"w-44 text-center border-2 rounded-xl",children:[e.jsx("option",{value:"Status",children:"Status"}),e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Success",children:"Success"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Failure",children:"Failure"})]}),e.jsxs("select",{name:"show",id:"show",className:"w-44 text-center border-2 rounded-xl",value:l,onChange:y,children:[e.jsx("option",{value:"10",children:"Show 10"}),e.jsx("option",{value:"20",children:"Show 20"}),e.jsx("option",{value:"30",children:"Show 30"}),e.jsx("option",{value:"40",children:"Show 40"})]})]})]}),e.jsxs("table",{className:"w-full mt-5",children:[e.jsx("thead",{className:"bg-[#f4f4f4]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-sm py-2 font-semibold font-Poppins text-[#767675]",children:"#ID"}),e.jsx("th",{className:"text-sm py-2 font-semibold font-Poppins text-[#767675]",children:"Name"}),e.jsx("th",{className:"text-sm py-2 font-semibold font-Poppins text-[#767675]",children:"Email"}),e.jsx("th",{className:"text-sm py-2 font-semibold font-Poppins text-[#767675]",children:"Total"}),e.jsx("th",{className:"text-sm py-2 font-semibold font-Poppins text-[#767675]",children:"Status"}),e.jsx("th",{className:"text-sm py-2 font-semibold font-Poppins text-[#767675]",children:"Date & Time"}),e.jsx("th",{className:"text-sm py-2 font-semibold font-Poppins text-[#767675]",children:"Action"})]})}),e.jsx("tbody",{children:O.map(t=>{var u,j;const r=new Date(t.order_created.created_at),o=v.includes(t.order_created.order_id);return e.jsxs("tr",{className:`text-center border-b-2 ${o?"bg-gray-200":""}`,children:[e.jsxs("td",{className:"relative text-sm uppercase font-medium font-Poppins",children:[o&&e.jsx("span",{className:"absolute top-3 -left-1 capitalize text-white font-medium font-Poppins ml-2",children:e.jsx("i",{className:"fi fi-sr-bullet text-xl text-[#f2707f]"})}),t.order_created.order_id]}),e.jsx("td",{className:"text-sm font-medium font-Poppins",children:t.order_created.customer_details.customer_name}),e.jsx("td",{className:"text-sm font-medium font-Poppins",children:t.order_created.customer_details.customer_email}),e.jsxs("td",{className:"text-sm font-medium font-Poppins",children:["â‚¹",t.order_created.order_amount]}),e.jsx("td",{className:"text-[12px] font-medium font-Poppins",children:e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("h1",{className:`w-fit px-2 py-1 rounded-full ${(u=t.order_updated[0])!=null&&u.payment_status?t.order_updated[0].payment_status==="SUCCESS"?"bg-[#ccf0d1] text-[#006d0e]":"bg-[#fdcccc] text-[#920000]":"bg-[#ffe8d0] text-[#98530c]"}`,children:((j=t.order_updated[0])==null?void 0:j.payment_status)||"ACTIVE"})})}),e.jsxs("td",{className:"text-sm font-medium font-Poppins",children:[r.toLocaleDateString().replace(/\//g,"-"),",",e.jsx("br",{}),e.jsx("span",{className:"text-[12px]",children:r.toLocaleTimeString()})]}),e.jsxs("td",{className:"relative flex flex-col items-center px-2",children:[e.jsx(c,{onClick:()=>_(t.order_created.order_id),children:e.jsx("i",{className:"fi fi-br-menu-dots text-base text-black hover:text-[#f2707f] pt-1 px-2"})}),m===t.order_created.order_id&&e.jsxs("div",{className:"text-left w-fit p-2 bg-[#f4f4f4] flex flex-col gap-2 rounded-xl absolute top-12 z-10",children:[e.jsx("h1",{className:"text-[12px] font-Poppins font-medium cursor-pointer hover:bg-white rounded-xl px-5 py-2",onClick:()=>w(t._id),children:"View Details"}),e.jsx("h1",{className:"text-[12px] font-Poppins font-medium cursor-pointer hover:bg-white rounded-xl px-5 py-2",children:"Edit"}),e.jsx("h1",{className:"text-[12px] font-Poppins font-medium cursor-pointer hover:bg-white rounded-xl px-5 py-2",children:"Delete"})]})]})]},t.order_created.order_id)})})]}),e.jsxs("div",{className:"flex justify-center items-center mt-5 fixed bottom-0 left-0 right-0",children:[e.jsx(c,{onClick:D,disabled:s===1,children:e.jsx("i",{className:"fi fi-rr-angle-circle-left pt-1 px-2 text-2xl hover:text-[#f2707f]"})}),e.jsxs("span",{className:"text-sm font-Poppins",children:["Page ",s," of ",d]}),e.jsx(c,{onClick:C,disabled:s===d,children:e.jsx("i",{className:"fi fi-rr-angle-circle-right pt-1 px-2 text-2xl hover:text-[#f2707f]"})})]})]})})};export{U as default};
